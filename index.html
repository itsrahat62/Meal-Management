<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Æ‡¶ø‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Noto Sans Bengali', sans-serif; }
        body { margin: 0; padding: 0; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect } = React;

// ==================== ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ====================
const getStoredData = (key, defaultValue) => {
    try {
        const stored = localStorage.getItem(key);
        return stored ? JSON.parse(stored) : defaultValue;
    } catch {
        return defaultValue;
    }
};

const initialUsers = [
    { id: 1, name: 'Admin', username: 'admin', password: 'admin', role: 'admin', fishPreference: 'normal', mealBalance: 0 }
];

const initialMenuSchedule = [
    { date: '2025-01-14', menu: '‡¶Æ‡¶æ‡¶Ç‡¶∏', description: '‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏ ‡¶≠‡ßÅ‡¶®‡¶æ' },
    { date: '2025-01-15', menu: '‡¶Æ‡¶æ‡¶õ', description: '‡¶∞‡ßÅ‡¶á ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶ù‡ßã‡¶≤' },
    { date: '2025-01-16', menu: '‡¶°‡¶ø‡¶Æ', description: '‡¶°‡¶ø‡¶Æ ‡¶≠‡¶æ‡¶ú‡¶ø ‡¶ì ‡¶∏‡¶¨‡¶ú‡¶ø' },
    { date: '2025-01-17', menu: '‡¶Æ‡¶æ‡¶Ç‡¶∏', description: '‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶∞‡ßã‡¶∏‡ßç‡¶ü' },
    { date: '2025-01-18', menu: '‡¶Æ‡¶æ‡¶õ', description: '‡¶á‡¶≤‡¶ø‡¶∂ ‡¶≠‡¶æ‡¶™‡¶æ' },
    { date: '2025-01-19', menu: '‡¶°‡¶ø‡¶Æ', description: '‡¶°‡¶ø‡¶Æ ‡¶ï‡¶æ‡¶∞‡¶ø' },
    { date: '2025-01-20', menu: '‡¶Æ‡¶æ‡¶Ç‡¶∏', description: '‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏' },
];

// ==================== ‡¶Æ‡ßá‡¶á‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ====================
function App() {
    const [currentUser, setCurrentUser] = useState(null);
    const [users, setUsers] = useState(() => getStoredData('meal_users', initialUsers));
    const [menuSchedule, setMenuSchedule] = useState(() => getStoredData('meal_menu', initialMenuSchedule));
    const [expenses, setExpenses] = useState(() => getStoredData('meal_expenses', []));
    const [mealStatus, setMealStatus] = useState(() => getStoredData('meal_status', {}));
    const [isMealLocked, setIsMealLocked] = useState(() => getStoredData('meal_locked', false));
    const today = new Date().toISOString().split('T')[0];

    useEffect(() => { localStorage.setItem('meal_users', JSON.stringify(users)); }, [users]);
    useEffect(() => { localStorage.setItem('meal_menu', JSON.stringify(menuSchedule)); }, [menuSchedule]);
    useEffect(() => { localStorage.setItem('meal_expenses', JSON.stringify(expenses)); }, [expenses]);
    useEffect(() => { localStorage.setItem('meal_status', JSON.stringify(mealStatus)); }, [mealStatus]);
    useEffect(() => { localStorage.setItem('meal_locked', JSON.stringify(isMealLocked)); }, [isMealLocked]);

    if (!currentUser) {
        return <LoginScreen users={users} setCurrentUser={setCurrentUser} />;
    }

    if (currentUser.role === 'admin') {
        return (
            <AdminPanel
                currentUser={currentUser}
                setCurrentUser={setCurrentUser}
                users={users}
                setUsers={setUsers}
                menuSchedule={menuSchedule}
                setMenuSchedule={setMenuSchedule}
                expenses={expenses}
                setExpenses={setExpenses}
                mealStatus={mealStatus}
                setMealStatus={setMealStatus}
                isMealLocked={isMealLocked}
                setIsMealLocked={setIsMealLocked}
                today={today}
            />
        );
    }

    return (
        <UserPanel
            currentUser={currentUser}
            setCurrentUser={setCurrentUser}
            users={users}
            setUsers={setUsers}
            menuSchedule={menuSchedule}
            expenses={expenses}
            mealStatus={mealStatus}
            setMealStatus={setMealStatus}
            isMealLocked={isMealLocked}
            today={today}
        />
    );
}

// ==================== ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ====================
function LoginScreen({ users, setCurrentUser }) {
    const [loginType, setLoginType] = useState(null);
    const [username, setUsername] = useState('');
    const [password, setPassword] = useState('');
    const [error, setError] = useState('');

    const handleLogin = () => {
        const user = users.find(u => 
            u.username === username && 
            u.password === password && 
            (loginType === 'admin' ? u.role === 'admin' : u.role === 'user')
        );
        if (user) {
            setCurrentUser(user);
        } else {
            setError('‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        }
    };

    if (!loginType) {
        return (
            <div className="min-h-screen bg-gradient-to-br from-emerald-950 via-teal-900 to-cyan-950 flex items-center justify-center p-4">
                <div className="absolute inset-0 overflow-hidden">
                    <div className="absolute top-20 left-20 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"></div>
                    <div className="absolute bottom-20 right-20 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse" style={{animationDelay: '1s'}}></div>
                </div>
                <div className="relative z-10 text-center">
                    <div className="mb-12">
                        <div className="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-3xl shadow-2xl shadow-emerald-500/30 mb-6">
                            <span className="text-4xl">üçΩÔ∏è</span>
                        </div>
                        <h1 className="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-300 via-teal-200 to-cyan-300 mb-3">
                            ‡¶Æ‡¶ø‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü
                        </h1>
                        <p className="text-teal-400/70 text-lg">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶è‡¶ï ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º</p>
                    </div>
                    <div className="flex flex-col sm:flex-row gap-6 justify-center">
                        <button
                            onClick={() => setLoginType('user')}
                            className="group relative px-10 py-6 bg-gradient-to-br from-emerald-600/20 to-emerald-800/20 border-2 border-emerald-500/30 rounded-2xl hover:border-emerald-400 transition-all"
                        >
                            <div className="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <span className="text-2xl">üë§</span>
                            </div>
                            <span className="text-emerald-200 text-xl font-bold block">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶á‡¶®</span>
                            <span className="text-emerald-400/60 text-sm">‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶®/‡¶Ö‡¶´ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                        </button>
                        <button
                            onClick={() => setLoginType('admin')}
                            className="group relative px-10 py-6 bg-gradient-to-br from-cyan-600/20 to-cyan-800/20 border-2 border-cyan-500/30 rounded-2xl hover:border-cyan-400 transition-all"
                        >
                            <div className="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <span className="text-2xl">üë®‚Äçüíº</span>
                            </div>
                            <span className="text-cyan-200 text-xl font-bold block">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶®</span>
                            <span className="text-cyan-400/60 text-sm">‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£</span>
                        </button>
                    </div>
                </div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-gradient-to-br from-emerald-950 via-teal-900 to-cyan-950 flex items-center justify-center p-4">
            <div className="relative z-10 w-full max-w-md">
                <div className="bg-gradient-to-br from-slate-900/90 to-slate-800/90 backdrop-blur-xl border border-slate-700/50 rounded-3xl p-8 shadow-2xl">
                    <button onClick={() => setLoginType(null)} className="text-slate-400 hover:text-white mb-6 flex items-center gap-2">
                        <span>‚Üê</span> ‡¶™‡ßá‡¶õ‡¶®‡ßá ‡¶Ø‡¶æ‡¶®
                    </button>
                    <div className="text-center mb-8">
                        <div className={`w-20 h-20 mx-auto mb-4 bg-gradient-to-br ${loginType === 'admin' ? 'from-cyan-400 to-cyan-600' : 'from-emerald-400 to-emerald-600'} rounded-2xl flex items-center justify-center`}>
                            <span className="text-3xl">{loginType === 'admin' ? 'üë®‚Äçüíº' : 'üë§'}</span>
                        </div>
                        <h2 className="text-2xl font-bold text-white">{loginType === 'admin' ? '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®' : '‡¶á‡¶â‡¶ú‡¶æ‡¶∞'} ‡¶≤‡¶ó‡¶á‡¶®</h2>
                    </div>
                    {error && (
                        <div className="bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-3 rounded-xl mb-6 text-center">
                            {error}
                        </div>
                    )}
                    <div className="space-y-5">
                        <div>
                            <label className="block text-slate-400 text-sm mb-2">‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</label>
                            <input
                                type="text"
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                className="w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white focus:border-emerald-500 focus:outline-none"
                                placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                            />
                        </div>
                        <div>
                            <label className="block text-slate-400 text-sm mb-2">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°</label>
                            <input
                                type="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white focus:border-emerald-500 focus:outline-none"
                                placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                            />
                        </div>
                        <button
                            onClick={handleLogin}
                            className={`w-full py-4 bg-gradient-to-r ${loginType === 'admin' ? 'from-cyan-500 to-cyan-600' : 'from-emerald-500 to-emerald-600'} text-white font-bold rounded-xl hover:opacity-90 transition-opacity`}
                        >
                            ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                    {loginType === 'admin' && (
                        <p className="text-center text-slate-500 text-sm mt-6">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü: admin / admin</p>
                    )}
                    {loginType === 'user' && (
                        <p className="text-center text-slate-500 text-sm mt-6">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: 123456</p>
                    )}
                </div>
            </div>
        </div>
    );
}

// ==================== ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ====================
function AdminPanel({ currentUser, setCurrentUser, users, setUsers, menuSchedule, setMenuSchedule, expenses, setExpenses, mealStatus, setMealStatus, isMealLocked, setIsMealLocked, today }) {
    const [activeTab, setActiveTab] = useState('dashboard');
    const [showUserModal, setShowUserModal] = useState(false);
    const [showMenuModal, setShowMenuModal] = useState(false);
    const [showExpenseModal, setShowExpenseModal] = useState(false);

    const tabs = [
        { id: 'dashboard', label: '‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°', icon: 'üìä' },
        { id: 'users', label: '‡¶á‡¶â‡¶ú‡¶æ‡¶∞', icon: 'üë•' },
        { id: 'menu', label: '‡¶Æ‡ßá‡¶®‡ßÅ', icon: 'üìÖ' },
        { id: 'expenses', label: '‡¶ñ‡¶∞‡¶ö', icon: 'üí∞' },
        { id: 'reports', label: '‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü', icon: 'üìà' }
    ];

    const regularUsers = users.filter(u => u.role === 'user');
    const todayMenu = menuSchedule.find(m => m.date === today);
    const isFishDay = todayMenu?.menu === '‡¶Æ‡¶æ‡¶õ';

    const getMealStats = () => {
        const dayStatus = mealStatus[today] || {};
        let totalOn = 0, totalOff = 0, fishEaters = 0, eggInstead = 0;
        
        regularUsers.forEach(user => {
            const userMealOn = dayStatus[user.id] !== false;
            if (userMealOn) {
                totalOn++;
                if (isFishDay) {
                    if (user.fishPreference === 'egg') eggInstead++;
                    else if (user.fishPreference !== 'autoOff') fishEaters++;
                }
            } else {
                totalOff++;
            }
        });
        return { totalOn, totalOff, fishEaters, eggInstead };
    };

    const stats = getMealStats();
    const totalExpense = expenses.reduce((sum, e) => sum + Number(e.price), 0);

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
            {/* Header */}
            <header className="bg-slate-900/80 backdrop-blur-xl border-b border-slate-800 sticky top-0 z-50">
                <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-xl flex items-center justify-center">
                            <span className="text-xl">üçΩÔ∏è</span>
                        </div>
                        <div>
                            <h1 className="text-xl font-bold text-white">‡¶Æ‡¶ø‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h1>
                            <p className="text-cyan-400 text-sm">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</p>
                        </div>
                    </div>
                    <button
                        onClick={() => setCurrentUser(null)}
                        className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"
                    >
                        ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                    </button>
                </div>
            </header>

            <div className="max-w-7xl mx-auto px-4 py-6">
                {/* Tabs */}
                <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            onClick={() => setActiveTab(tab.id)}
                            className={`flex items-center gap-2 px-5 py-3 rounded-xl font-medium whitespace-nowrap transition-all ${
                                activeTab === tab.id
                                    ? 'bg-gradient-to-r from-cyan-500 to-cyan-600 text-white shadow-lg shadow-cyan-500/25'
                                    : 'bg-slate-800/50 text-slate-400 hover:bg-slate-700'
                            }`}
                        >
                            <span>{tab.icon}</span>
                            <span>{tab.label}</span>
                        </button>
                    ))}
                </div>

                {/* Dashboard Tab */}
                {activeTab === 'dashboard' && (
                    <div className="space-y-6">
                        {/* Meal Lock Control */}
                        <div className="bg-gradient-to-br from-slate-800/50 to-slate-900/50 border border-slate-700/50 rounded-2xl p-6">
                            <div className="flex items-center justify-between flex-wrap gap-4">
                                <div>
                                    <h3 className="text-xl font-bold text-white mb-2">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡¶ø‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤</h3>
                                    <p className="text-slate-400">
                                        {isMealLocked ? 'üîí ‡¶Æ‡¶ø‡¶≤ ‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá - ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá' : 'üîì ‡¶Æ‡¶ø‡¶≤ ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶Ü‡¶õ‡ßá - ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶∞‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá'}
                                    </p>
                                </div>
                                <button
                                    onClick={() => setIsMealLocked(!isMealLocked)}
                                    className={`px-6 py-3 rounded-xl font-bold transition-all ${
                                        isMealLocked
                                            ? 'bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700'
                                            : 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700'
                                    } text-white`}
                                >
                                    {isMealLocked ? 'üîì ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®' : 'üîí ‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®'}
                                </button>
                            </div>
                        </div>

                        {/* Stats Grid */}
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-800/20 border border-emerald-500/30 rounded-2xl p-5">
                                <p className="text-emerald-300 text-sm mb-1">‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶®</p>
                                <p className="text-3xl font-black text-white">{stats.totalOn}</p>
                            </div>
                            <div className="bg-gradient-to-br from-red-600/20 to-red-800/20 border border-red-500/30 rounded-2xl p-5">
                                <p className="text-red-300 text-sm mb-1">‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶´</p>
                                <p className="text-3xl font-black text-white">{stats.totalOff}</p>
                            </div>
                            <div className="bg-gradient-to-br from-amber-600/20 to-amber-800/20 border border-amber-500/30 rounded-2xl p-5">
                                <p className="text-amber-300 text-sm mb-1">‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</p>
                                <p className="text-3xl font-black text-white">‡ß≥{totalExpense}</p>
                            </div>
                            <div className="bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-2xl p-5">
                                <p className="text-purple-300 text-sm mb-1">‡¶Æ‡ßã‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</p>
                                <p className="text-3xl font-black text-white">{regularUsers.length}</p>
                            </div>
                        </div>

                        {/* Fish Day Stats */}
                        {isFishDay && (
                            <div className="grid grid-cols-2 gap-4">
                                <div className="bg-gradient-to-br from-blue-600/20 to-blue-800/20 border border-blue-500/30 rounded-2xl p-5">
                                    <p className="text-blue-300 text-sm mb-1">üêü ‡¶Æ‡¶æ‡¶õ ‡¶ñ‡¶æ‡¶¨‡ßá</p>
                                    <p className="text-3xl font-black text-white">{stats.fishEaters}</p>
                                </div>
                                <div className="bg-gradient-to-br from-amber-600/20 to-amber-800/20 border border-amber-500/30 rounded-2xl p-5">
                                    <p className="text-amber-300 text-sm mb-1">ü•ö ‡¶°‡¶ø‡¶Æ ‡¶ñ‡¶æ‡¶¨‡ßá</p>
                                    <p className="text-3xl font-black text-white">{stats.eggInstead}</p>
                                </div>
                            </div>
                        )}

                        {/* Today's Menu */}
                        {todayMenu && (
                            <div className="bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-2xl p-6">
                                <h3 className="text-lg font-bold text-white mb-3">üìÖ ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ</h3>
                                <div className="flex items-center gap-4">
                                    <span className="text-4xl">
                                        {todayMenu.menu === '‡¶Æ‡¶æ‡¶õ' ? 'üêü' : todayMenu.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'üçñ' : 'ü•ö'}
                                    </span>
                                    <div>
                                        <p className="text-2xl font-bold text-white">{todayMenu.menu}</p>
                                        <p className="text-purple-300">{todayMenu.description}</p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                )}

                {/* Users Tab */}
                {activeTab === 'users' && (
                    <div className="space-y-6">
                        <div className="flex justify-between items-center">
                            <h2 className="text-2xl font-bold text-white">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
                            <button
                                onClick={() => setShowUserModal(true)}
                                className="px-5 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-bold rounded-xl hover:opacity-90"
                            >
                                + ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞
                            </button>
                        </div>
                        <div className="grid gap-4">
                            {regularUsers.length === 0 ? (
                                <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center">
                                    <p className="text-slate-400">‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                                </div>
                            ) : (
                                regularUsers.map(user => (
                                    <div key={user.id} className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-5 flex items-center justify-between">
                                        <div className="flex items-center gap-4">
                                            <div className="w-14 h-14 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center text-2xl">
                                                üë§
                                            </div>
                                            <div>
                                                <p className="text-lg font-bold text-white">{user.name}</p>
                                                <p className="text-slate-400">@{user.username}</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <span className={`px-3 py-1 rounded-full text-sm ${
                                                user.fishPreference === 'autoOff' ? 'bg-red-500/20 text-red-300' :
                                                user.fishPreference === 'egg' ? 'bg-amber-500/20 text-amber-300' :
                                                'bg-blue-500/20 text-blue-300'
                                            }`}>
                                                {user.fishPreference === 'autoOff' ? 'üö´ ‡¶Ö‡¶ü‡ßã ‡¶Ö‡¶´' :
                                                 user.fishPreference === 'egg' ? 'ü•ö ‡¶°‡¶ø‡¶Æ' : 'üêü ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£'}
                                            </span>
                                            <button
                                                onClick={() => setUsers(users.filter(u => u.id !== user.id))}
                                                className="px-3 py-1 bg-red-500/20 text-red-300 rounded-lg hover:bg-red-500/30"
                                            >
                                                ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                            </button>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                        {showUserModal && (
                            <UserModal
                                onClose={() => setShowUserModal(false)}
                                onSave={(newUser) => {
                                    setUsers([...users, {
                                        ...newUser,
                                        id: Date.now(),
                                        role: 'user',
                                        password: '123456',
                                        fishPreference: 'normal'
                                    }]);
                                    setShowUserModal(false);
                                }}
                            />
                        )}
                    </div>
                )}

                {/* Menu Tab */}
                {activeTab === 'menu' && (
                    <div className="space-y-6">
                        <div className="flex justify-between items-center">
                            <h2 className="text-2xl font-bold text-white">‡¶Æ‡ßá‡¶®‡ßÅ ‡¶∂‡¶ø‡¶°‡¶ø‡¶â‡¶≤</h2>
                            <button
                                onClick={() => setShowMenuModal(true)}
                                className="px-5 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-bold rounded-xl hover:opacity-90"
                            >
                                + ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶Ø‡ßã‡¶ó
                            </button>
                        </div>
                        <div className="grid gap-4">
                            {menuSchedule.sort((a, b) => new Date(a.date) - new Date(b.date)).map((menu, idx) => (
                                <div key={idx} className={`bg-slate-800/50 border rounded-2xl p-5 flex items-center justify-between ${
                                    menu.date === today ? 'border-emerald-500/50' : 'border-slate-700/50'
                                }`}>
                                    <div className="flex items-center gap-4">
                                        <div className={`w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${
                                            menu.menu === '‡¶Æ‡¶æ‡¶õ' ? 'bg-blue-500/20' :
                                            menu.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'bg-red-500/20' : 'bg-amber-500/20'
                                        }`}>
                                            {menu.menu === '‡¶Æ‡¶æ‡¶õ' ? 'üêü' : menu.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'üçñ' : 'ü•ö'}
                                        </div>
                                        <div>
                                            <p className="text-lg font-bold text-white">{menu.menu}</p>
                                            <p className="text-slate-400">{menu.description}</p>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-slate-300">{new Date(menu.date).toLocaleDateString('bn-BD')}</p>
                                        {menu.date === today && <span className="text-emerald-400 text-sm">‡¶Ü‡¶ú</span>}
                                    </div>
                                </div>
                            ))}
                        </div>
                        {showMenuModal && (
                            <MenuModal
                                onClose={() => setShowMenuModal(false)}
                                onSave={(newMenu) => {
                                    setMenuSchedule([...menuSchedule, newMenu]);
                                    setShowMenuModal(false);
                                }}
                            />
                        )}
                    </div>
                )}

                {/* Expenses Tab */}
                {activeTab === 'expenses' && (
                    <div className="space-y-6">
                        <div className="flex justify-between items-center">
                            <h2 className="text-2xl font-bold text-white">‡¶ñ‡¶∞‡¶ö ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h2>
                            <button
                                onClick={() => setShowExpenseModal(true)}
                                className="px-5 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-bold rounded-xl hover:opacity-90"
                            >
                                + ‡¶ñ‡¶∞‡¶ö ‡¶Ø‡ßã‡¶ó
                            </button>
                        </div>
                        <div className="bg-gradient-to-br from-amber-600/20 to-amber-800/20 border border-amber-500/30 rounded-2xl p-5 mb-4">
                            <p className="text-amber-300 text-sm">‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</p>
                            <p className="text-3xl font-black text-white">‡ß≥{totalExpense}</p>
                        </div>
                        <div className="grid gap-4">
                            {expenses.length === 0 ? (
                                <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center">
                                    <p className="text-slate-400">‡¶ï‡ßã‡¶®‡ßã ‡¶ñ‡¶∞‡¶ö ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶®‡ßá‡¶á‡•§</p>
                                </div>
                            ) : (
                                expenses.map((expense, idx) => (
                                    <div key={idx} className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-5">
                                        <div className="flex items-center justify-between mb-3">
                                            <div className="flex items-center gap-3">
                                                <div className="w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center">
                                                    <span className="text-xl">üõí</span>
                                                </div>
                                                <div>
                                                    <p className="text-lg font-bold text-white">{expense.item}</p>
                                                    <p className="text-slate-400">{expense.quantity}</p>
                                                </div>
                                            </div>
                                            <p className="text-2xl font-bold text-amber-400">‡ß≥{expense.price}</p>
                                        </div>
                                        <div className="flex gap-2">
                                            {expense.isOffice && (
                                                <span className="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm">
                                                    ‡¶Ö‡¶´‡¶ø‡¶∏ ‡¶ñ‡¶∞‡¶ö
                                                </span>
                                            )}
                                            <span className={`px-3 py-1 rounded-full text-sm ${
                                                expense.type === 'monthly' ? 'bg-blue-500/20 text-blue-300' : 'bg-emerald-500/20 text-emerald-300'
                                            }`}>
                                                {expense.type === 'monthly' ? '‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï' : '‡¶¶‡ßà‡¶®‡¶ø‡¶ï'}
                                            </span>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                        {showExpenseModal && (
                            <ExpenseModal
                                onClose={() => setShowExpenseModal(false)}
                                onSave={(newExpense) => {
                                    setExpenses([...expenses, { ...newExpense, date: today }]);
                                    setShowExpenseModal(false);
                                }}
                            />
                        )}
                    </div>
                )}

                {/* Reports Tab */}
                {activeTab === 'reports' && (
                    <div className="space-y-6">
                        <h2 className="text-2xl font-bold text-white">‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h2>
                        <div className="grid md:grid-cols-2 gap-6">
                            <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
                                <h3 className="text-lg font-bold text-white mb-4">üìä ‡¶Æ‡¶ø‡¶≤ ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø</h3>
                                <div className="space-y-3">
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶Æ‡ßã‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</span>
                                        <span className="text-white font-bold">{regularUsers.length} ‡¶ú‡¶®</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶Ü‡¶ú ‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶®</span>
                                        <span className="text-emerald-400 font-bold">{stats.totalOn} ‡¶ú‡¶®</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶Ü‡¶ú ‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶´</span>
                                        <span className="text-red-400 font-bold">{stats.totalOff} ‡¶ú‡¶®</span>
                                    </div>
                                </div>
                            </div>
                            <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
                                <h3 className="text-lg font-bold text-white mb-4">üí∞ ‡¶ñ‡¶∞‡¶ö‡ßá‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h3>
                                <div className="space-y-3">
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</span>
                                        <span className="text-amber-400 font-bold">‡ß≥{totalExpense}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ñ‡¶∞‡¶ö</span>
                                        <span className="text-white font-bold">
                                            ‡ß≥{expenses.filter(e => e.type === 'daily').reduce((s, e) => s + Number(e.price), 0)}
                                        </span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-400">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶ñ‡¶∞‡¶ö</span>
                                        <span className="text-white font-bold">
                                            ‡ß≥{expenses.filter(e => e.type === 'monthly').reduce((s, e) => s + Number(e.price), 0)}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                )}
            </div>
        </div>
    );
}

// ==================== ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ====================
function UserPanel({ currentUser, setCurrentUser, users, setUsers, menuSchedule, expenses, mealStatus, setMealStatus, isMealLocked, today }) {
    const [activeTab, setActiveTab] = useState('dashboard');

    const tabs = [
        { id: 'dashboard', label: '‡¶π‡ßã‡¶Æ', icon: 'üè†' },
        { id: 'meal', label: '‡¶Æ‡¶ø‡¶≤', icon: 'üçΩÔ∏è' },
        { id: 'menu', label: '‡¶Æ‡ßá‡¶®‡ßÅ', icon: 'üìÖ' },
        { id: 'profile', label: '‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤', icon: 'üë§' }
    ];

    const todayMenu = menuSchedule.find(m => m.date === today);
    const userMealStatus = mealStatus[today]?.[currentUser.id] !== false;

    const toggleMeal = (date) => {
        if (isMealLocked && date === today) return;
        setMealStatus(prev => ({
            ...prev,
            [date]: {
                ...prev[date],
                [currentUser.id]: !(prev[date]?.[currentUser.id] !== false)
            }
        }));
    };

    const updateFishPreference = (pref) => {
        setUsers(users.map(u => u.id === currentUser.id ? { ...u, fishPreference: pref } : u));
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
            {/* Header */}
            <header className="bg-slate-900/80 backdrop-blur-xl border-b border-slate-800 sticky top-0 z-50">
                <div className="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <div className="w-10 h-10 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl flex items-center justify-center">
                            <span className="text-xl">üçΩÔ∏è</span>
                        </div>
                        <div>
                            <h1 className="text-lg font-bold text-white">{currentUser.name}</h1>
                            <p className="text-emerald-400 text-sm">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</p>
                        </div>
                    </div>
                    <button
                        onClick={() => setCurrentUser(null)}
                        className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl"
                    >
                        ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                    </button>
                </div>
            </header>

            <div className="max-w-4xl mx-auto px-4 py-6">
                {/* Tabs */}
                <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            onClick={() => setActiveTab(tab.id)}
                            className={`flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap ${
                                activeTab === tab.id
                                    ? 'bg-gradient-to-r from-emerald-500 to-emerald-600 text-white'
                                    : 'bg-slate-800/50 text-slate-400'
                            }`}
                        >
                            <span>{tab.icon}</span>
                            <span>{tab.label}</span>
                        </button>
                    ))}
                </div>

                {/* Dashboard Tab */}
                {activeTab === 'dashboard' && (
                    <div className="space-y-6">
                        <div className={`bg-gradient-to-br ${
                            userMealStatus 
                                ? 'from-emerald-600/20 to-emerald-800/20 border-emerald-500/30' 
                                : 'from-red-600/20 to-red-800/20 border-red-500/30'
                        } border rounded-2xl p-6`}>
                            <div className="flex items-center justify-between flex-wrap gap-4">
                                <div>
                                    <p className="text-slate-400 mb-1">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡¶ø‡¶≤</p>
                                    <p className={`text-3xl font-black ${userMealStatus ? 'text-emerald-400' : 'text-red-400'}`}>
                                        {userMealStatus ? '‚úÖ ‡¶Ö‡¶® ‡¶Ü‡¶õ‡ßá' : '‚ùå ‡¶Ö‡¶´ ‡¶Ü‡¶õ‡ßá'}
                                    </p>
                                </div>
                                {!isMealLocked && (
                                    <button
                                        onClick={() => toggleMeal(today)}
                                        className={`px-6 py-3 rounded-xl font-bold ${
                                            userMealStatus ? 'bg-red-500 hover:bg-red-600' : 'bg-emerald-500 hover:bg-emerald-600'
                                        } text-white`}
                                    >
                                        {userMealStatus ? '‡¶Ö‡¶´ ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶Ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®'}
                                    </button>
                                )}
                            </div>
                            {isMealLocked && (
                                <p className="text-amber-400 mt-3 text-sm">üîí ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶Ø‡¶º ‡¶Æ‡¶ø‡¶≤ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶¨‡¶®‡ßç‡¶ß ‡¶Ü‡¶õ‡ßá</p>
                            )}
                        </div>

                        {todayMenu && (
                            <div className="bg-gradient-to-br from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-2xl p-6">
                                <p className="text-slate-400 mb-2">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ</p>
                                <div className="flex items-center gap-4">
                                    <span className="text-4xl">
                                        {todayMenu.menu === '‡¶Æ‡¶æ‡¶õ' ? 'üêü' : todayMenu.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'üçñ' : 'ü•ö'}
                                    </span>
                                    <div>
                                        <p className="text-2xl font-bold text-white">{todayMenu.menu}</p>
                                        <p className="text-purple-300">{todayMenu.description}</p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                )}

                {/* Meal Tab */}
                {activeTab === 'meal' && (
                    <div className="space-y-6">
                        <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
                            <h3 className="text-lg font-bold text-white mb-4">üìÖ ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡ß≠ ‡¶¶‡¶ø‡¶®</h3>
                            <div className="space-y-3">
                                {Array.from({ length: 7 }).map((_, i) => {
                                    const date = new Date();
                                    date.setDate(date.getDate() + i);
                                    const dateStr = date.toISOString().split('T')[0];
                                    const menu = menuSchedule.find(m => m.date === dateStr);
                                    const isOn = mealStatus[dateStr]?.[currentUser.id] !== false;
                                    const isLocked = isMealLocked && dateStr === today;

                                    return (
                                        <div key={i} className="flex items-center justify-between p-4 bg-slate-900/50 rounded-xl">
                                            <div className="flex items-center gap-3">
                                                <span className="text-2xl">
                                                    {menu?.menu === '‡¶Æ‡¶æ‡¶õ' ? 'üêü' : menu?.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'üçñ' : 'ü•ö'}
                                                </span>
                                                <div>
                                                    <p className="text-white font-medium">
                                                        {date.toLocaleDateString('bn-BD', { weekday: 'long' })}
                                                    </p>
                                                    <p className="text-slate-400 text-sm">{menu?.menu || '‡¶Æ‡ßá‡¶®‡ßÅ ‡¶®‡ßá‡¶á'}</p>
                                                </div>
                                            </div>
                                            <button
                                                onClick={() => !isLocked && toggleMeal(dateStr)}
                                                disabled={isLocked}
                                                className={`px-4 py-2 rounded-lg font-medium ${
                                                    isLocked
                                                        ? 'bg-slate-700 text-slate-500 cursor-not-allowed'
                                                        : isOn
                                                            ? 'bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30'
                                                            : 'bg-red-500/20 text-red-400 hover:bg-red-500/30'
                                                }`}
                                            >
                                                {isLocked ? 'üîí' : isOn ? '‚úÖ ‡¶Ö‡¶®' : '‚ùå ‡¶Ö‡¶´'}
                                            </button>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                )}

                {/* Menu Tab */}
                {activeTab === 'menu' && (
                    <div className="space-y-4">
                        <h3 className="text-lg font-bold text-white">üìÖ ‡¶è‡¶á ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ</h3>
                        {menuSchedule.sort((a, b) => new Date(a.date) - new Date(b.date)).map((menu, idx) => (
                            <div key={idx} className={`bg-slate-800/50 border rounded-2xl p-5 ${
                                menu.date === today ? 'border-emerald-500/50' : 'border-slate-700/50'
                            }`}>
                                <div className="flex items-center gap-4">
                                    <span className="text-3xl">
                                        {menu.menu === '‡¶Æ‡¶æ‡¶õ' ? 'üêü' : menu.menu === '‡¶Æ‡¶æ‡¶Ç‡¶∏' ? 'üçñ' : 'ü•ö'}
                                    </span>
                                    <div className="flex-1">
                                        <p className="text-lg font-bold text-white">{menu.menu}</p>
                                        <p className="text-slate-400">{menu.description}</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-slate-300 text-sm">
                                            {new Date(menu.date).toLocaleDateString('bn-BD', { weekday: 'long' })}
                                        </p>
                                        {menu.date === today && <span className="text-emerald-400 text-xs">‡¶Ü‡¶ú</span>}
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                )}

                {/* Profile Tab */}
                {activeTab === 'profile' && (
                    <div className="space-y-6">
                        <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
                            <div className="flex items-center gap-4 mb-6">
                                <div className="w-20 h-20 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-2xl flex items-center justify-center text-4xl">
                                    üë§
                                </div>
                                <div>
                                    <p className="text-2xl font-bold text-white">{currentUser.name}</p>
                                    <p className="text-slate-400">@{currentUser.username}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6">
                            <h3 className="text-lg font-bold text-white mb-4">üêü ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶Æ‡¶ø‡¶≤ ‡¶™‡¶õ‡¶®‡ßç‡¶¶</h3>
                            <div className="space-y-3">
                                {[
                                    { id: 'normal', label: '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£', desc: '‡¶Æ‡¶æ‡¶õ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá‡¶ì ‡¶Æ‡¶ø‡¶≤ ‡¶ö‡¶≤‡¶¨‡ßá', icon: 'üêü' },
                                    { id: 'egg', label: '‡¶°‡¶ø‡¶Æ', desc: '‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá ‡¶°‡¶ø‡¶Æ ‡¶ñ‡¶æ‡¶¨', icon: 'ü•ö' },
                                    { id: 'autoOff', label: '‡¶Ö‡¶ü‡ßã ‡¶Ö‡¶´', desc: '‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶Æ‡¶ø‡¶≤ ‡¶Ö‡¶ü‡ßã ‡¶Ö‡¶´', icon: 'üö´' }
                                ].map(opt => (
                                    <button
                                        key={opt.id}
                                        onClick={() => updateFishPreference(opt.id)}
                                        className={`w-full flex items-center gap-4 p-4 rounded-xl transition-all ${
                                            currentUser.fishPreference === opt.id
                                                ? 'bg-emerald-500/20 border-2 border-emerald-500'
                                                : 'bg-slate-900/50 border-2 border-transparent hover:border-slate-600'
                                        }`}
                                    >
                                        <span className="text-2xl">{opt.icon}</span>
                                        <div className="text-left flex-1">
                                            <p className="text-white font-medium">{opt.label}</p>
                                            <p className="text-slate-400 text-sm">{opt.desc}</p>
                                        </div>
                                        {currentUser.fishPreference === opt.id && (
                                            <span className="text-emerald-400 text-xl">‚úì</span>
                                        )}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                )}
            </div>
        </div>
    );
}

// ==================== ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶®‡ßá‡¶®‡ßç‡¶ü‡¶∏ ====================
function UserModal({ onClose, onSave }) {
    const [name, setName] = useState('');
    const [username, setUsername] = useState('');

    return (
        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div className="bg-slate-900 border border-slate-700 rounded-2xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold text-white mb-6">‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø</h3>
                <div className="space-y-4">
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶®‡¶æ‡¶Æ</label>
                        <input
                            type="text"
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ"
                        />
                    </div>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ</label>
                        <input
                            type="text"
                            value={username}
                            onChange={(e) => setUsername(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ"
                        />
                    </div>
                    <p className="text-slate-500 text-sm">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: 123456</p>
                </div>
                <div className="flex gap-3 mt-6">
                    <button onClick={onClose} className="flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                    </button>
                    <button
                        onClick={() => name && username && onSave({ name, username })}
                        className="flex-1 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white font-bold rounded-xl"
                    >
                        ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>
        </div>
    );
}

function MenuModal({ onClose, onSave }) {
    const [date, setDate] = useState('');
    const [menu, setMenu] = useState('‡¶Æ‡¶æ‡¶Ç‡¶∏');
    const [description, setDescription] = useState('');

    return (
        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div className="bg-slate-900 border border-slate-700 rounded-2xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold text-white mb-6">‡¶Æ‡ßá‡¶®‡ßÅ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <div className="space-y-4">
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                        <input
                            type="date"
                            value={date}
                            onChange={(e) => setDate(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                        />
                    </div>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶Æ‡ßá‡¶®‡ßÅ</label>
                        <select
                            value={menu}
                            onChange={(e) => setMenu(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                        >
                            <option value="‡¶Æ‡¶æ‡¶õ">üêü ‡¶Æ‡¶æ‡¶õ</option>
                            <option value="‡¶Æ‡¶æ‡¶Ç‡¶∏">üçñ ‡¶Æ‡¶æ‡¶Ç‡¶∏</option>
                            <option value="‡¶°‡¶ø‡¶Æ">ü•ö ‡¶°‡¶ø‡¶Æ</option>
                        </select>
                    </div>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
                        <input
                            type="text"
                            value={description}
                            onChange={(e) => setDescription(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∞‡ßÅ‡¶á ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶ù‡ßã‡¶≤"
                        />
                    </div>
                </div>
                <div className="flex gap-3 mt-6">
                    <button onClick={onClose} className="flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                    </button>
                    <button
                        onClick={() => date && onSave({ date, menu, description })}
                        className="flex-1 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-bold rounded-xl"
                    >
                        ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>
        </div>
    );
}

function ExpenseModal({ onClose, onSave }) {
    const [item, setItem] = useState('');
    const [quantity, setQuantity] = useState('');
    const [price, setPrice] = useState('');
    const [isOffice, setIsOffice] = useState(false);
    const [type, setType] = useState('daily');

    return (
        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div className="bg-slate-900 border border-slate-700 rounded-2xl p-6 w-full max-w-md">
                <h3 className="text-xl font-bold text-white mb-6">‡¶ñ‡¶∞‡¶ö ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h3>
                <div className="space-y-4">
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ</label>
                        <input
                            type="text"
                            value={item}
                            onChange={(e) => setItem(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ö‡¶æ‡¶≤, ‡¶Æ‡¶æ‡¶õ"
                        />
                    </div>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
                        <input
                            type="text"
                            value={quantity}
                            onChange={(e) => setQuantity(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß® ‡¶ï‡ßá‡¶ú‡¶ø"
                        />
                    </div>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ)</label>
                        <input
                            type="number"
                            value={price}
                            onChange={(e) => setPrice(e.target.value)}
                            className="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white"
                            placeholder="‡ßß‡ß¶‡ß¶"
                        />
                    </div>
                    <label className="flex items-center gap-2 text-slate-300 cursor-pointer">
                        <input
                            type="checkbox"
                            checked={isOffice}
                            onChange={(e) => setIsOffice(e.target.checked)}
                            className="w-5 h-5 rounded"
                        />
                        ‡¶Ö‡¶´‡¶ø‡¶∏ ‡¶ñ‡¶∞‡¶ö
                    </label>
                    <div>
                        <label className="block text-slate-400 text-sm mb-2">‡¶ß‡¶∞‡¶®</label>
                        <div className="flex gap-4">
                            <button
                                onClick={() => setType('daily')}
                                className={`flex-1 py-2 rounded-xl ${
                                    type === 'daily' ? 'bg-emerald-500 text-white' : 'bg-slate-800 text-slate-400'
                                }`}
                            >
                                ‡¶¶‡ßà‡¶®‡¶ø‡¶ï
                            </button>
                            <button
                                onClick={() => setType('monthly')}
                                className={`flex-1 py-2 rounded-xl ${
                                    type === 'monthly' ? 'bg-blue-500 text-white' : 'bg-slate-800 text-slate-400'
                                }`}
                            >
                                ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï
                            </button>
                        </div>
                    </div>
                </div>
                <div className="flex gap-3 mt-6">
                    <button onClick={onClose} className="flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl hover:bg-slate-700">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                    </button>
                    <button
                        onClick={() => item && price && onSave({ item, quantity, price: Number(price), isOffice, type })}
                        className="flex-1 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-bold rounded-xl"
                    >
                        ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>
        </div>
    );
}

// ==================== ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ====================
ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
